@page "/"
@inject NavigationManager NavigationManager



@if (UserState.isLoggedIn)
{
    <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-16">

        <MudGrid Justify="Justify.Center">
            <img class="mud-typography-align-center" src="@UserState.Avatar"/>
        </MudGrid>

        <MudText></MudText>
        <br/>
        <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">@UserState.InstaUser.FullName</MudText>
        <MudText Typo="Typo.body2" Align="Align.Center" GutterBottom="true">@UserState.InstaUser.Biography</MudText>
        <MudText Typo="Typo.body2" Align="Align.Center" GutterBottom="true">@@ @UserState.InstaUser.UserName</MudText>

        <MudGrid>
            <MudItem xs="12">
                <MudGrid Spacing="2" Justify="Justify.Center">
                    <MudItem>
                        <MudAlert Class="mb-3" Severity="Severity.Normal">
                            <MudLink>Followers :</MudLink> @UserState.FollowersCount
                        </MudAlert>
                    </MudItem>
                    <MudItem>
                        <MudAlert Class="mb-3" Severity="Severity.Normal">
                            <MudLink>Following :</MudLink> @UserState.FollowingCount
                        </MudAlert>
                    </MudItem>
                </MudGrid>
            </MudItem>
        </MudGrid>
        <MudGrid Spacing="2" Justify="Justify.Center">
            <MudItem>
                <MudAlert Class="mb - 3" Severity="Severity.Normal">Not follows : @UserState.NotFollowingCount</MudAlert>
            </MudItem>
        </MudGrid>
        <MudContainer>


        </MudContainer>

        <MudText> </MudText>

        @* <MudText Class="mb-8">Welcome to your new app, powerd by MudBlazor!</MudText> *@
        @* <MudAlert Severity="Severity.Normal">You can find documentation and examples on our website here: <MudLink Href="https://mudblazor.com" Typo="Typo.body2" Color="MudBlazor.Color.Inherit"><b>www.mudblazor.com</b></MudLink></MudAlert> *@
    </MudContainer>
}
else
{
    <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-16">
    
            <MudGrid Justify="Justify.Center">
                <MudSkeleton SkeletonType="SkeletonType.Circle"></MudSkeleton>
            </MudGrid>
    
            <MudText></MudText>
            <br/>
            <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true"><MudSkeleton SkeletonType="SkeletonType.Text"></MudSkeleton></MudText>
            <MudText Typo="Typo.body2" Align="Align.Center" GutterBottom="true"><MudSkeleton SkeletonType="SkeletonType.Text"></MudSkeleton></MudText>
            <MudText Typo="Typo.body2" Align="Align.Center" GutterBottom="true"><MudSkeleton SkeletonType="SkeletonType.Text"></MudSkeleton></MudText>
    
            <MudGrid>
                <MudItem xs="12">
                    <MudGrid Spacing="2" Justify="Justify.Center">
                        <MudItem>
                            <MudAlert Class="mb-3" Severity="Severity.Normal">
                                <MudLink>Followers :</MudLink> <MudSkeleton SkeletonType="SkeletonType.Text"></MudSkeleton>
                            </MudAlert>
                        </MudItem>
                        <MudItem>
                            <MudAlert Class="mb-3" Severity="Severity.Normal">
                                <MudLink>Following :</MudLink> <MudSkeleton SkeletonType="SkeletonType.Text"></MudSkeleton>
                            </MudAlert>
                        </MudItem>
                    </MudGrid>
                </MudItem>
            </MudGrid>
            <MudGrid Spacing="2" Justify="Justify.Center">
                <MudItem>
                    <MudAlert Class="mb - 3" Severity="Severity.Normal">Not follows : <MudSkeleton SkeletonType="SkeletonType.Text"></MudSkeleton></MudAlert>
                </MudItem>
            </MudGrid>
            <MudContainer>
    
    
            </MudContainer>
    
            <MudText> </MudText>
    
            @* <MudText Class="mb-8">Welcome to your new app, powerd by MudBlazor!</MudText> *@
            @* <MudAlert Severity="Severity.Normal">You can find documentation and examples on our website here: <MudLink Href="https://mudblazor.com" Typo="Typo.body2" Color="MudBlazor.Color.Inherit"><b>www.mudblazor.com</b></MudLink></MudAlert> *@
        </MudContainer>
}




@code
{
    
     protected override async Task OnInitializedAsync()
     {
         if (UserState.isLoggedIn) return;
        
         var sucsess = await UserState.tryToLoginAsync();
         if (!sucsess)
         {
             NavigationManager.NavigateTo("Login");
         }
     }
    
}